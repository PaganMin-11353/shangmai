<header class="site-header" id="site-header">
    <div class="container">
        <div class="header-content">
            <!-- Logo -->
            <a href="{{ .Site.BaseURL }}" class="site-logo" aria-label="Go to homepage">
                {{ if .Site.Params.logo }}
                    <img src="{{ .Site.Params.logo }}" alt="{{ .Site.Title }}" height="32" width="auto" loading="eager">
                {{ else }}
                    {{ .Site.Title }}
                {{ end }}
            </a>
            
            <!-- Main Navigation -->
            <nav class="main-nav" id="main-nav" role="navigation" aria-label="Main navigation">
                {{ if .Site.Menus.main }}
                    {{ range .Site.Menus.main }}
                        <a href="{{ .URL }}" 
                           class="nav-link {{ if $.IsMenuCurrent "main" . }}active{{ end }}"
                           {{ if .Page }}aria-current="page"{{ end }}>
                            {{ .Name }}
                        </a>
                    {{ end }}
                {{ else }}
                    <!-- Fallback navigation if no menu is defined -->
                    <a href="{{ .Site.BaseURL }}" class="nav-link {{ if .IsHome }}active{{ end }}">Home</a>
                    <a href="/products/" class="nav-link {{ if eq .Section "products" }}active{{ end }}">Products</a>
                    <a href="/about/" class="nav-link {{ if eq .Section "about" }}active{{ end }}">About</a>
                    <a href="/contact/" class="nav-link {{ if eq .Section "contact" }}active{{ end }}">Contact</a>
                {{ end }}
                
                <!-- CTA Button -->
                <a href="/contact/" class="btn btn-primary btn-sm">Get Started</a>
            </nav>
            
            <!-- Mobile Menu Toggle -->
            <button class="mobile-nav-toggle" 
                    id="mobile-nav-toggle" 
                    aria-label="Toggle navigation menu"
                    aria-expanded="false"
                    aria-controls="main-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </div>
    
    <!-- Mobile Navigation Backdrop -->
    <div class="mobile-nav-backdrop" id="mobile-nav-backdrop"></div>
</header>

<style>
/* Mobile Navigation Backdrop */
.mobile-nav-backdrop {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: calc(var(--z-sticky) - 1);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.mobile-nav-backdrop.active {
    display: block;
    opacity: 1;
}

/* Enhanced Mobile Navigation */
@media (max-width: 768px) {
    .main-nav {
        position: fixed;
        top: var(--header-height);
        left: 0;
        right: 0;
        background-color: var(--color-white);
        border-bottom: 1px solid var(--color-border);
        flex-direction: column;
        padding: var(--space-6);
        gap: var(--space-4);
        box-shadow: var(--shadow-lg);
        transform: translateY(-100%);
        transition: transform var(--transition-normal);
        z-index: var(--z-sticky);
        max-height: calc(100vh - var(--header-height));
        overflow-y: auto;
    }
    
    .main-nav.active {
        transform: translateY(0);
    }
    
    .nav-link {
        padding: var(--space-3) 0;
        border-bottom: 1px solid var(--color-border-light);
        width: 100%;
        text-align: left;
    }
    
    .nav-link:last-of-type {
        border-bottom: none;
    }
    
    .nav-link.active::after {
        display: none;
    }
    
    .nav-link.active {
        background-color: var(--color-background-secondary);
        padding-left: var(--space-4);
        border-radius: var(--radius-base);
    }
    
    /* Mobile CTA Button */
    .main-nav .btn {
        margin-top: var(--space-4);
        justify-self: center;
        width: 100%;
        justify-content: center;
    }
}

/* Enhanced Header Scroll Effect */
.site-header.scrolled {
    background-color: rgba(255, 255, 255, 0.95);
    box-shadow: var(--shadow-sm);
}

/* Focus States for Accessibility */
.nav-link:focus-visible,
.site-logo:focus-visible,
.mobile-nav-toggle:focus-visible {
    outline: 2px solid var(--color-secondary);
    outline-offset: 2px;
    border-radius: var(--radius-base);
}

/* Hover Effects */
.nav-link:hover {
    background-color: var(--color-background-secondary);
    border-radius: var(--radius-base);
    padding-left: var(--space-2);
    padding-right: var(--space-2);
}

@media (min-width: 769px) {
    .nav-link:hover {
        background-color: transparent;
        padding: var(--space-2) 0;
    }
}

/* Logo Image Styling */
.site-logo img {
    height: 32px;
    width: auto;
    transition: all var(--transition-fast);
}

.site-logo:hover img {
    transform: scale(1.05);
}

/* Mega Menu (for future enhancement) */
.nav-item {
    position: relative;
}

.nav-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    background-color: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    box-shadow: var(--shadow-lg);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all var(--transition-fast);
    z-index: var(--z-dropdown);
    min-width: 200px;
}

.nav-item:hover .nav-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.nav-dropdown a {
    display: block;
    padding: var(--space-2) var(--space-3);
    color: var(--color-text-primary);
    text-decoration: none;
    border-radius: var(--radius-base);
    transition: all var(--transition-fast);
}

.nav-dropdown a:hover {
    background-color: var(--color-background-secondary);
    color: var(--color-secondary);
}
</style>