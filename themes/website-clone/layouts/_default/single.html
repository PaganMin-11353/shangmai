{{ define "main" }}
<article style="padding: 2rem 0;">
    <div class="container">
        <!-- Breadcrumb -->
        <nav style="margin-bottom: 2rem; font-size: 0.875rem; color: var(--color-text-light);">
            <a href="{{ .Site.BaseURL }}">Home</a>
            {{ if .Section }}
            <span style="margin: 0 0.5rem;">/</span>
            <a href="/{{ .Section }}/">{{ .Section | title }}</a>
            {{ end }}
            <span style="margin: 0 0.5rem;">/</span>
            <span>{{ .Title }}</span>
        </nav>
        
        <!-- Article Header -->
        <header style="margin-bottom: 2rem;">
            <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">{{ .Title }}</h1>
            {{ if .Params.description }}
            <p style="font-size: 1.25rem; color: var(--color-text-light); margin-bottom: 1rem;">{{ .Params.description }}</p>
            {{ end }}
            
            <!-- Meta Information -->
            <div style="display: flex; flex-wrap: wrap; gap: 1rem; font-size: 0.875rem; color: var(--color-text-muted); margin-bottom: 2rem;">
                {{ if .Date }}
                <span>{{ .Date.Format "January 2, 2006" }}</span>
                {{ end }}
                {{ if .Params.author }}
                <span>By {{ .Params.author }}</span>
                {{ end }}
                {{ if .Params.tags }}
                <span>Tags: 
                    {{ range $i, $tag := .Params.tags }}
                        {{ if $i }}, {{ end }}
                        <a href="/tags/{{ $tag | urlize }}/" style="color: var(--color-accent);">{{ $tag }}</a>
                    {{ end }}
                </span>
                {{ end }}
            </div>
        </header>
        
        <!-- Featured Image -->
        {{ if .Params.image }}
        <div style="margin-bottom: 2rem;">
            <img src="{{ .Params.image }}" alt="{{ .Title }}" style="width: 100%; height: 400px; object-fit: cover; border-radius: var(--border-radius-lg);">
        </div>
        {{ end }}
        
        <!-- Article Content -->
        <div class="content" style="max-width: 800px; margin: 0 auto;">
            {{ .Content }}
        </div>
        
        <!-- Product Specifications (if applicable) -->
        {{ if .Params.specifications }}
        <section style="margin-top: 3rem; padding: 2rem; background-color: var(--color-surface); border-radius: var(--border-radius-lg);">
            <h2 style="margin-bottom: 1rem;">Specifications</h2>
            <div class="grid grid-2" style="gap: 1rem;">
                {{ range $key, $value := .Params.specifications }}
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--color-border);">
                    <strong>{{ $key | title }}</strong>
                    <span>{{ $value }}</span>
                </div>
                {{ end }}
            </div>
        </section>
        {{ end }}
        
        <!-- Related Products -->
        {{ if eq .Section "products" }}
        {{ $related := .Site.RegularPages.Related . | first 3 }}
        {{ if $related }}
        <section style="margin-top: 4rem;">
            <h2 style="margin-bottom: 2rem;">Related Products</h2>
            <div class="grid grid-3">
                {{ range $related }}
                <article class="card">
                    {{ if .Params.image }}
                    <img src="{{ .Params.image }}" alt="{{ .Title }}" style="width: 100%; height: 150px; object-fit: cover; border-radius: var(--border-radius); margin-bottom: 1rem;">
                    {{ end }}
                    <h3 class="card-title">{{ .Title }}</h3>
                    <p class="card-text">{{ .Summary | truncate 100 }}</p>
                    <a href="{{ .RelPermalink }}" class="btn btn-outline">Learn More</a>
                </article>
                {{ end }}
            </div>
        </section>
        {{ end }}
        {{ end }}
        
        <!-- Navigation -->
        <nav style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--color-border);">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                {{ if .PrevInSection }}
                <a href="{{ .PrevInSection.RelPermalink }}" class="btn btn-outline">
                    ← {{ .PrevInSection.Title }}
                </a>
                {{ else }}
                <div></div>
                {{ end }}
                
                <a href="/{{ .Section }}/" class="btn btn-primary">
                    Back to {{ .Section | title }}
                </a>
                
                {{ if .NextInSection }}
                <a href="{{ .NextInSection.RelPermalink }}" class="btn btn-outline">
                    {{ .NextInSection.Title }} →
                </a>
                {{ else }}
                <div></div>
                {{ end }}
            </div>
        </nav>
    </div>
</article>
{{ end }}